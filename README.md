# SQLD study

아래 내용은 불친절한 SQL프로그래밍(정희락 저)을 모르는 것을 위주로 개인 공부를 위해 정리한 내용입니다.
도서 내용이 SQL와 DB 기초 전반에 걸쳐 도움이 되니 분은 구매하셔서 읽어보시는 것을 추천합니다. (SQL 문법은 oracle 문법을 사용)

## 데이터 모델링
#### 카디널리티(cardinality)
cardinality는 하나의 부모 인스턴스가 몇 개의 자식 인스턴스와 페어링될 수 있는지를 나타냄
카디널리티에는 1:1, 1:M, M:M 관계가 존재
이 중에서 M:M의 경우를 알아보자

M:M 관계는 엔터티를 추가하여 M:M 관계를 해소해야 한다.
+ before
	- 부서 > - - < 사원
+ after
	+ 부서 - - < 부서소속사원 > - - 사원

부서 - 부서소속사원 테이블은 1:M 관계이며
부서소속사원 - 사원 테이블은 M:1 관계가 되어서 **하나의 부서는 한 명 이상의 사원을 가질 수 있고, 한 명의 사원은 하나 이상의 부서에 속할 수 있다.**

### 옵셔널리티(optionality)
옵셔널리티는 부모 인스턴스와 자식 인스턴스의 페어링 여부를 타나낸다.
+ mandatory(필수) 관계
	+ 페어링되어야 하는 관계
+ optional(선택) 관계
	+ 페어링되지 않아도 되는 관계

릴레이션 표기 방법은 아래 이미지를 참고
![[relation1.jpg]]

+ full mandatory
	+ 상호 필수 관계
+ optional
	+ 한쪽에만 optional이 있는 관계
+ full optional
	+ 양쪽 모두 optional이 있는 관계


## 정규형(normal form : NF)
정규형은 데이터 이상(anomaly) 현상을 제거하기 위한 관계형 모델의 설계 지침
아래 나오는 정규화 테이블의 bold 속성은 unique 값을 의미한다.

### 1정규형(1NF)
1정규형은 속성의 원자성과 관련이 있다. 
릴레이션이 원자성을 띄도록 테이블을 분리해주는 것을 생각하자


![[1정규화-1.png]]


![[1정규화-2.png]]

상품과 관련부서번호를 1정규화를 적용하면 아래와 같이 된다.
Mandatory:Optional 관계를 보인다.
![[1정규화-3.png]]

### 2정규형(2NF)
2정규형은 부분 종속과 관련된다.
부분 종속은 일반 속성이 식별자의 일부 속성에만 종속 되는 것

![[2정규화-1.png]]
이 경우에는 2정규형이 위배되며 데이터 이상(anomaly) 현상이 발생한다.
+ 주문이 발생하지 않으면 상품을 입력할 수 없고(입력이상)
+ 상품명이 변경되면 동일한 상품코드의 튜플을 모두 수정해야 하며(수정 이상)
+ 상품이 삭제되면 주문도 삭제된다(삭제이상)

이를 2정규화 하면 다음과 같이 된다.
![[2정규화-2.png]]


### 3정규형(3NF)
3정규형은 이행 종속(transitive dependency)과 관련 있다.
이는 **일반 속성이 다른 일반 속성에 종속되는 것**이다.

![[3정규화-3.png]]